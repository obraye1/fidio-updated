function _extends(){return(_extends=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a,r=arguments[e];for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}import React from"react";import{v4 as uuidv4}from"uuid";import DOMPurify from"dompurify";import ArticleStyles from"./Article.module.scss";import templates from"./templates";import{Article}from"/layout";const Module=e=>{var[,,]=React.useState(!1);const[a,r]=React.useState(!1),[t,c]=React.useState(null),[l,i]=React.useState(null),[s,u]=React.useState(null),[n,m]=React.useState("basic");var o=React.useRef();e._LocalEventEmitter.unsubscribe(t),e._LocalEventEmitter.subscribe(t,t=>{t&&"loadDefault"!==t.dispatch&&t.dispatch}),React.useEffect(()=>{var t;a||(t=uuidv4(),c(t),r(!0))},[a]),React.useEffect(()=>{l?.meta?.template?m(l.meta.template):e?.selectTemplate&&m(e.selectTemplate)},[e?.selectTemplate,l]),React.useEffect(()=>{var t;e?.articleData&&(!l||l?.id&&e?.articleData?.id&&l.id!==e.articleData.id)&&(i(e.articleData),e.articleData.contents)&&(t=JSON.parse(e.articleData.contents))&&u(t)},[e?.articleData,l]);var p=Object.assign(templates,e?.articleTemplates??{}),f=n&&p&&p[n];return React.createElement(React.Fragment,null,React.createElement(Article,_extends({},e,{useTemplates:p,template:f,articleHtml:s,articleData:l,createMarkup:function(){return{__html:DOMPurify.sanitize(s??"")}},htmlRef:o,ArticleStyles:ArticleStyles})))};export default Module;