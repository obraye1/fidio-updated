import React from"react";import Head from"next/head";import{useRouter}from"next/router";import resolveConfig,{pageDefaults}from"/app.config";import{basicError,generateComponent,handlePropsPriority,resolvePage,resolvePageName,getServerSidePropsDefault,resolveDefaults}from"/modules/utility.js";import{isObjectEmpty}from"/modules/util";import{Menu}from"/modules/menu/";import{constructGeneral,paintMeta}from"./meta/general";import middlewareFunctions from"/customModules/middleware/MiddlewareFunctions";const PageContainer=t=>{var e=useRouter();const{query:a,asPath:o}=e,[r,n]=React.useState(!1),[s,i]=React.useState({});t.resolvedDefinition;let l=resolvePage(resolveConfig(t._configVariables,t),t.path);l&&l.data;const c=async e=>{var e=await resolveDefaults(l.url,t,t._configVariables,a,o,n,e);isObjectEmpty(e)||(e=Object.assign({...t},e),i(e))};t._LocalEventEmitter.unsubscribe("refetchDefaults"),t._LocalEventEmitter.subscribe("refetchDefaults",e=>{c(!0)}),React.useEffect(()=>{l&&l.url&&!r&&isObjectEmpty(s)&&c()},[r,s,l]);var u=handlePropsPriority(s,t),p=(f=(l=resolvePage(resolveConfig(t._configVariables,u),u.path))&&l.data,generateComponent(f)),m=!f||f?.props&&!Object.prototype.hasOwnProperty.call(f.props,"useMenu")||f.props?.useMenu,f=!f||f?.props&&!Object.prototype.hasOwnProperty.call(f.props,"useAppConfigLayout")||f.props?.useAppConfigLayout;const g=Object.assign({},u);g.useMenu=m,g.useAppConfigLayout=f;m=React.createElement("div",{className:u.pageName+"_Body "+(t.pageClass??""),style:{top:u.menuConfig.height?u.menuConfig.height+"px":"",position:"relative"}},p),g.useAppConfigLayout&&(g.appConfigLayout=m),f=React.Children.map(t.children,function(e){return null!==e?"function"==typeof e.type?React.cloneElement(e,g):e:React.createElement("div")}),u="/ar"===l?.url;let d=constructGeneral(e,g);return middlewareFunctions?.transformMeta&&(d=middlewareFunctions.transformMeta(e,d,g)),React.createElement(React.Fragment,null,React.createElement(Head,null,React.createElement("title",null,g.siteTitle),g?.googleClientId?React.createElement("meta",{name:"google-signin-client_id",content:""+g.googleClientId}):null,paintMeta(d)),React.createElement("div",{className:u?"Article_SafeStyles":""},f))};export default PageContainer;