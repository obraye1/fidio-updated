import React from"react";import{useRouter}from"next/router";import resolveConfig,{pageDefaults}from"/app.config";import{basicError,generateComponent,handlePropsPriority,resolvePage,resolvePageName,getServerSidePropsDefault,resolveDefaults}from"/modules/utility.js";import{isObjectEmpty}from"/modules/util";import{Menu}from"/modules/menu/";const PageContainer=t=>{const{query:a,asPath:o}=useRouter(),[e,r]=React.useState(!1),[s,n]=React.useState({});t.resolvedDefinition;let i=resolvePage(resolveConfig(t._configVariables,t),t.path);i&&i.data;const l=async e=>{var e=await resolveDefaults(i.url,t,t._configVariables,a,o,r,e);isObjectEmpty(e)||(e=Object.assign({...t},e),n(e))};t._LocalEventEmitter.unsubscribe("refetchDefaults"),t._LocalEventEmitter.subscribe("refetchDefaults",e=>{l(!0)}),React.useEffect(()=>{i&&i.url&&!e&&isObjectEmpty(s)&&l()},[e,s,i]);var p=handlePropsPriority(s,t),u=(f=(i=resolvePage(resolveConfig(t._configVariables,p),p.path))&&i.data,generateComponent(f)),c=!f||f?.props&&!Object.prototype.hasOwnProperty.call(f.props,"useMenu")||f.props?.useMenu,f=!f||f?.props&&!Object.prototype.hasOwnProperty.call(f.props,"useAppConfigLayout")||f.props?.useAppConfigLayout;const m=Object.assign({},p);m.useMenu=c,m.useAppConfigLayout=f;c=React.createElement("div",{className:p.pageName+"_Body "+(t.pageClass??""),style:{top:p.menuConfig.height?p.menuConfig.height+"px":"",position:"relative"}},u),m.useAppConfigLayout&&(m.appConfigLayout=c),f=React.Children.map(t.children,function(e){return null!==e?"function"==typeof e.type?React.cloneElement(e,m):e:React.createElement("div")}),p="/ar"===i?.url;return React.createElement(React.Fragment,null,React.createElement("div",{className:p?"Article_SafeStyles":""},f))};export default PageContainer;